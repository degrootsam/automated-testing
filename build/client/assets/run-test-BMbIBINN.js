import{j as o}from"./jsx-runtime-0DLF9kdB.js";import{d as c,b as l,r as m}from"./components-DAwjMhVV.js";import{c as p}from"./index-Cz_0cKVJ.js";import{B as d}from"./index-uFqOPUMb.js";function k({type:a}){const{project:s,suite:n,testName:i}=c(),e=l({key:"run-test"}),u=t=>{t.preventDefault();let r="";switch(a){case"test":r=`/api/tests/${s.name}/${n}/${i}/run`;break;case"suite":r=`/api/tests/${s.name}/${n}/run`;break;case"project":r=`/api/tests/${s.name}/run`;break;default:throw new Error(`${a} is not a valid type for <RunSingleTestButton />`)}e.submit(null,{action:r,method:"POST",preventScrollReset:!0})};return m.useEffect(()=>{if(e.data){const t=e.data.process;if(t&&(t!=null&&t.stderr))throw new Error(`Unable to start test: ${(t==null?void 0:t.stderr)||"unkown"}`)}},[e.data]),o.jsxs(d,{type:"submit",color:"primary",onClick:u,loading:e.state!=="idle",children:[o.jsx(p,{}),"Run"]})}export{k as R};
