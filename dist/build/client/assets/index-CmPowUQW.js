import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{C as w,B as h}from"./index-uFqOPUMb.js";import{H as C}from"./index-ZxjzPnyj.js";import{R as M}from"./run-test-BMbIBINN.js";import{e as b,f as v,g as R}from"./index-Cz_0cKVJ.js";import{G as T}from"./iconBase-ViZ73mvc.js";import{L as y}from"./index-BAt5lQ6G.js";import{r as d,b as F,d as g,L as x,a as $}from"./components-DAwjMhVV.js";import{g as L}from"./index-CokscfNF.js";import{A as S}from"./index-D3e8Zo9y.js";import{M as k}from"./index-BmP81L1w.js";import{i as p}from"./index-BhvR20cr.js";import"./index-Cl9ayPRv.js";import"./index-CouqIJUX.js";function N({test:t,suite:r,project:i,showModal:m,onSuccess:u,onHideModal:a}){const l=d.useRef(null),s=F({key:"delete-test"}),f=n=>{n.preventDefault(),l.current&&(console.log(`/projects/${i.name}/suites/${r}/tests/delete`),s.submit(l.current,{method:"POST",action:`/projects/${i.name}/suites/${r}/tests/delete`}))},c=d.useCallback(()=>{if(s.data){if(p(s.data))return;a&&a(),u(),s.data=void 0}},[a,u,s]);return d.useEffect(()=>{c()},[c]),e.jsxs(k,{showModal:m,onHideModal:a,title:"Are you sure?",buttons:[{children:e.jsxs(e.Fragment,{children:[e.jsx(L,{}),"Confirm"]}),color:"error",onClick:f,loading:s.state!=="idle"}],children:[e.jsxs("p",{className:"text-sm",children:["Are you sure you want to delete test ",e.jsx("b",{children:t}),"?"]}),p(s.data)&&e.jsx(S,{message:s.data.error.message,className:"mt-2",color:"error"}),e.jsx(s.Form,{ref:l,children:e.jsx("input",{type:"hidden",name:"test",value:t})})]})}function V(t){return T({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 2V4H16V18C16 20.2091 14.2091 22 12 22C9.79086 22 8 20.2091 8 18V4H7V2H17ZM13 15C12.4477 15 12 15.4477 12 16C12 16.5523 12.4477 17 13 17C13.5523 17 14 16.5523 14 16C14 15.4477 13.5523 15 13 15ZM11 12C10.4477 12 10 12.4477 10 13C10 13.5523 10.4477 14 11 14C11.5523 14 12 13.5523 12 13C12 12.4477 11.5523 12 11 12ZM14 4H10V8H14V4Z"},child:[]}]})(t)}function Z(t){return T({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12C15 13.6569 13.6569 15 12 15Z"},child:[]}]})(t)}function D({tests:t,suite:r}){const{project:i}=g(),m=n=>n.map(o=>({title:o.name,status:{color:o.failed?"error":"success",ariaLabel:o.failed?"This test failed":"This test passed"},statusPosition:"start",buttons:[{"data-test":o.name,icon:b,color:"error",onClick:f},{"data-test":o.name,icon:v,href:`../tests/${o.name}/view`}],icon:V}))||[],[u,a]=d.useState(!1),[l,s]=d.useState(""),f=n=>{n.preventDefault();const{dataset:o}=n.currentTarget,j=o.test;j&&(s(j),a(!0))},c=()=>{a(!1)};return e.jsxs(w,{children:[e.jsx(N,{onHideModal:c,suite:r,test:l,project:i,onSuccess:c,showModal:u}),e.jsxs("div",{className:"flex flex-row items-center justify-between mb-4",children:[e.jsxs(C,{size:"h5",children:["Tests for ",r]}),e.jsx(x,{to:"../record/start",children:e.jsxs(h,{children:[e.jsx(Z,{})," Record Test"," "]})})]}),e.jsx(y,{noResultsText:"No tests were found yet",title:`${t.length} tests found`,items:m(t)})]})}function U(){const{project:t,suite:r}=g(),{tests:i}=$();return e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsxs(C,{size:"h1",children:["Test Suite for ",r]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(x,{to:"../../suites/view",children:e.jsx(h,{children:"Go back"})}),e.jsx(x,{to:`/projects/${t.name}/suites/${r}/configuration`,children:e.jsxs(h,{children:[e.jsx(R,{}),"Configure"]})}),e.jsx(M,{type:"suite"})]})]}),e.jsx(D,{tests:i,suite:r})]})}export{U as default};
