var st=Object.defineProperty;var ot=(v,p,h)=>p in v?st(v,p,{enumerable:!0,configurable:!0,writable:!0,value:h}):v[p]=h;var A=(v,p,h)=>ot(v,typeof p!="symbol"?p+"":p,h);import{j as S}from"./jsx-runtime-0DLF9kdB.js";import{r as W,l as dt,u as lt,a as ut,d as ht,b as Ke,F as ct,L as ft}from"./components-DAwjMhVV.js";import{A as pt}from"./index-D3e8Zo9y.js";import{B as mt}from"./index-DMsUvaHI.js";import{B as Ze,C as bt}from"./index-uFqOPUMb.js";import{c as J,H as gt}from"./index-ZxjzPnyj.js";import{T as Xr}from"./index-Bre9T0-e.js";import{T as vt}from"./index-wfZIODoR.js";import{T as wt}from"./index-CouqIJUX.js";import{f as Et,i as er}from"./index-BhvR20cr.js";import{F as yt,j as _t}from"./index-CokscfNF.js";import{P as X,i as xt,B as kt,a as Nt,C as jt,r as Ot}from"./index-DEkoM-wp.js";import"./iconBase-ViZ73mvc.js";function Ct({className:v,textfieldClassName:p,options:h,onSearchChange:d,name:s,value:i="",debounce:e=0,...o}){const[t,a]=W.useState(""),[r,n]=W.useState(i.toString()),[u,c]=W.useState(!1),[w,R]=W.useState(h);W.useEffect(()=>{R(h)},[h]);const m=W.useRef(null),N=E=>{var L;E.relatedTarget!=null&&((L=m.current)!=null&&L.contains(E.relatedTarget))||c(!1)},b=()=>{c(!0)},_=E=>{const{dataset:L}=E.currentTarget,l=L.value,f=L.label;!l||!f||(n(l),a(f),c(!1))},j=({option:E})=>S.jsx("button",{type:"button",onClick:_,className:"w-full py-2 px-4 flex flex-row hover:bg-base-200","data-value":E.value,"data-label":E.label,children:E.label});W.useEffect(()=>{R(Et(h,t));const E=setTimeout(()=>{d(t)},e);return()=>clearTimeout(E)},[t]);const I=E=>{const L=E.currentTarget.value;a(L)};return S.jsxs("div",{ref:m,className:J(v),onBlur:N,onFocus:b,tabIndex:-1,children:[S.jsx("input",{type:"hidden",name:s,value:r}),S.jsx(Xr,{...o,className:J("w-full",p),onChange:I,value:t,children:"Test"}),u&&S.jsx("div",{className:"relative",children:S.jsxs("div",{className:"absolute pt-2 z-10 bg-base-100 w-full border-l border-r border-b border-neutral",children:[S.jsx("p",{className:"text-xs opacity-30 mx-2",children:"Choose an option:"}),w.map(E=>S.jsx(j,{option:E},E.value))]})})]})}const Rt={primary:"radio-primary",secondary:"radio-secondary",success:"radio-success",warning:"radio-warning",error:"radio-error",accent:"radio-accent",info:"radio-info",neutral:"radio-neutral"},It={xs:"radio-xs",sm:"radio-sm",md:"radio-md",lg:"radio-lg",xl:"radio-xl"};function rr({color:v,size:p,...h}){const d=p?It[p]:"",s=v?Rt[v]:"";return S.jsx("input",{...h,type:"radio",className:J(d,s,"radio")})}var re,tr;function He(){if(tr)return re;tr=1;var v="\0",p="\0",h="";class d{constructor(r){A(this,"_isDirected",!0);A(this,"_isMultigraph",!1);A(this,"_isCompound",!1);A(this,"_label");A(this,"_defaultNodeLabelFn",()=>{});A(this,"_defaultEdgeLabelFn",()=>{});A(this,"_nodes",{});A(this,"_in",{});A(this,"_preds",{});A(this,"_out",{});A(this,"_sucs",{});A(this,"_edgeObjs",{});A(this,"_edgeLabels",{});A(this,"_nodeCount",0);A(this,"_edgeCount",0);A(this,"_parent");A(this,"_children");r&&(this._isDirected=Object.hasOwn(r,"directed")?r.directed:!0,this._isMultigraph=Object.hasOwn(r,"multigraph")?r.multigraph:!1,this._isCompound=Object.hasOwn(r,"compound")?r.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[p]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(r){return this._label=r,this}graph(){return this._label}setDefaultNodeLabel(r){return this._defaultNodeLabelFn=r,typeof r!="function"&&(this._defaultNodeLabelFn=()=>r),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var r=this;return this.nodes().filter(n=>Object.keys(r._in[n]).length===0)}sinks(){var r=this;return this.nodes().filter(n=>Object.keys(r._out[n]).length===0)}setNodes(r,n){var u=arguments,c=this;return r.forEach(function(w){u.length>1?c.setNode(w,n):c.setNode(w)}),this}setNode(r,n){return Object.hasOwn(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=n),this):(this._nodes[r]=arguments.length>1?n:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]=p,this._children[r]={},this._children[p][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)}node(r){return this._nodes[r]}hasNode(r){return Object.hasOwn(this._nodes,r)}removeNode(r){var n=this;if(Object.hasOwn(this._nodes,r)){var u=c=>n.removeEdge(n._edgeObjs[c]);delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],this.children(r).forEach(function(c){n.setParent(c)}),delete this._children[r]),Object.keys(this._in[r]).forEach(u),delete this._in[r],delete this._preds[r],Object.keys(this._out[r]).forEach(u),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this}setParent(r,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=p;else{n+="";for(var u=n;u!==void 0;u=this.parent(u))if(u===r)throw new Error("Setting "+n+" as parent of "+r+" would create a cycle");this.setNode(n)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=n,this._children[n][r]=!0,this}_removeFromParentsChildList(r){delete this._children[this._parent[r]][r]}parent(r){if(this._isCompound){var n=this._parent[r];if(n!==p)return n}}children(r=p){if(this._isCompound){var n=this._children[r];if(n)return Object.keys(n)}else{if(r===p)return this.nodes();if(this.hasNode(r))return[]}}predecessors(r){var n=this._preds[r];if(n)return Object.keys(n)}successors(r){var n=this._sucs[r];if(n)return Object.keys(n)}neighbors(r){var n=this.predecessors(r);if(n){const c=new Set(n);for(var u of this.successors(r))c.add(u);return Array.from(c.values())}}isLeaf(r){var n;return this.isDirected()?n=this.successors(r):n=this.neighbors(r),n.length===0}filterNodes(r){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var u=this;Object.entries(this._nodes).forEach(function([R,m]){r(R)&&n.setNode(R,m)}),Object.values(this._edgeObjs).forEach(function(R){n.hasNode(R.v)&&n.hasNode(R.w)&&n.setEdge(R,u.edge(R))});var c={};function w(R){var m=u.parent(R);return m===void 0||n.hasNode(m)?(c[R]=m,m):m in c?c[m]:w(m)}return this._isCompound&&n.nodes().forEach(R=>n.setParent(R,w(R))),n}setDefaultEdgeLabel(r){return this._defaultEdgeLabelFn=r,typeof r!="function"&&(this._defaultEdgeLabelFn=()=>r),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(r,n){var u=this,c=arguments;return r.reduce(function(w,R){return c.length>1?u.setEdge(w,R,n):u.setEdge(w,R),R}),this}setEdge(){var r,n,u,c,w=!1,R=arguments[0];typeof R=="object"&&R!==null&&"v"in R?(r=R.v,n=R.w,u=R.name,arguments.length===2&&(c=arguments[1],w=!0)):(r=R,n=arguments[1],u=arguments[3],arguments.length>2&&(c=arguments[2],w=!0)),r=""+r,n=""+n,u!==void 0&&(u=""+u);var m=e(this._isDirected,r,n,u);if(Object.hasOwn(this._edgeLabels,m))return w&&(this._edgeLabels[m]=c),this;if(u!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(n),this._edgeLabels[m]=w?c:this._defaultEdgeLabelFn(r,n,u);var N=o(this._isDirected,r,n,u);return r=N.v,n=N.w,Object.freeze(N),this._edgeObjs[m]=N,s(this._preds[n],r),s(this._sucs[r],n),this._in[n][m]=N,this._out[r][m]=N,this._edgeCount++,this}edge(r,n,u){var c=arguments.length===1?t(this._isDirected,arguments[0]):e(this._isDirected,r,n,u);return this._edgeLabels[c]}edgeAsObj(){const r=this.edge(...arguments);return typeof r!="object"?{label:r}:r}hasEdge(r,n,u){var c=arguments.length===1?t(this._isDirected,arguments[0]):e(this._isDirected,r,n,u);return Object.hasOwn(this._edgeLabels,c)}removeEdge(r,n,u){var c=arguments.length===1?t(this._isDirected,arguments[0]):e(this._isDirected,r,n,u),w=this._edgeObjs[c];return w&&(r=w.v,n=w.w,delete this._edgeLabels[c],delete this._edgeObjs[c],i(this._preds[n],r),i(this._sucs[r],n),delete this._in[n][c],delete this._out[r][c],this._edgeCount--),this}inEdges(r,n){var u=this._in[r];if(u){var c=Object.values(u);return n?c.filter(w=>w.v===n):c}}outEdges(r,n){var u=this._out[r];if(u){var c=Object.values(u);return n?c.filter(w=>w.w===n):c}}nodeEdges(r,n){var u=this.inEdges(r,n);if(u)return u.concat(this.outEdges(r,n))}}function s(a,r){a[r]?a[r]++:a[r]=1}function i(a,r){--a[r]||delete a[r]}function e(a,r,n,u){var c=""+r,w=""+n;if(!a&&c>w){var R=c;c=w,w=R}return c+h+w+h+(u===void 0?v:u)}function o(a,r,n,u){var c=""+r,w=""+n;if(!a&&c>w){var R=c;c=w,w=R}var m={v:c,w};return u&&(m.name=u),m}function t(a,r){return e(a,r.v,r.w,r.name)}return re=d,re}var te,nr;function Lt(){return nr||(nr=1,te="2.2.4"),te}var ne,ir;function qt(){return ir||(ir=1,ne={Graph:He(),version:Lt()}),ne}var ie,ar;function St(){if(ar)return ie;ar=1;var v=He();ie={write:p,read:s};function p(i){var e={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:h(i),edges:d(i)};return i.graph()!==void 0&&(e.value=structuredClone(i.graph())),e}function h(i){return i.nodes().map(function(e){var o=i.node(e),t=i.parent(e),a={v:e};return o!==void 0&&(a.value=o),t!==void 0&&(a.parent=t),a})}function d(i){return i.edges().map(function(e){var o=i.edge(e),t={v:e.v,w:e.w};return e.name!==void 0&&(t.name=e.name),o!==void 0&&(t.value=o),t})}function s(i){var e=new v(i.options).setGraph(i.value);return i.nodes.forEach(function(o){e.setNode(o.v,o.value),o.parent&&e.setParent(o.v,o.parent)}),i.edges.forEach(function(o){e.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),e}return ie}var ae,sr;function Tt(){if(sr)return ae;sr=1,ae=v;function v(p){var h={},d=[],s;function i(e){Object.hasOwn(h,e)||(h[e]=!0,s.push(e),p.successors(e).forEach(i),p.predecessors(e).forEach(i))}return p.nodes().forEach(function(e){s=[],i(e),s.length&&d.push(s)}),d}return ae}var se,or;function Jr(){if(or)return se;or=1;class v{constructor(){A(this,"_arr",[]);A(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(h){return h.key})}has(h){return Object.hasOwn(this._keyIndices,h)}priority(h){var d=this._keyIndices[h];if(d!==void 0)return this._arr[d].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(h,d){var s=this._keyIndices;if(h=String(h),!Object.hasOwn(s,h)){var i=this._arr,e=i.length;return s[h]=e,i.push({key:h,priority:d}),this._decrease(e),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var h=this._arr.pop();return delete this._keyIndices[h.key],this._heapify(0),h.key}decrease(h,d){var s=this._keyIndices[h];if(d>this._arr[s].priority)throw new Error("New priority is greater than current priority. Key: "+h+" Old: "+this._arr[s].priority+" New: "+d);this._arr[s].priority=d,this._decrease(s)}_heapify(h){var d=this._arr,s=2*h,i=s+1,e=h;s<d.length&&(e=d[s].priority<d[e].priority?s:e,i<d.length&&(e=d[i].priority<d[e].priority?i:e),e!==h&&(this._swap(h,e),this._heapify(e)))}_decrease(h){for(var d=this._arr,s=d[h].priority,i;h!==0&&(i=h>>1,!(d[i].priority<s));)this._swap(h,i),h=i}_swap(h,d){var s=this._arr,i=this._keyIndices,e=s[h],o=s[d];s[h]=o,s[d]=e,i[o.key]=h,i[e.key]=d}}return se=v,se}var oe,dr;function Kr(){if(dr)return oe;dr=1;var v=Jr();oe=h;var p=()=>1;function h(s,i,e,o){return d(s,String(i),e||p,o||function(t){return s.outEdges(t)})}function d(s,i,e,o){var t={},a=new v,r,n,u=function(c){var w=c.v!==r?c.v:c.w,R=t[w],m=e(c),N=n.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+c+" Weight: "+m);N<R.distance&&(R.distance=N,R.predecessor=r,a.decrease(w,N))};for(s.nodes().forEach(function(c){var w=c===i?0:Number.POSITIVE_INFINITY;t[c]={distance:w},a.add(c,w)});a.size()>0&&(r=a.removeMin(),n=t[r],n.distance!==Number.POSITIVE_INFINITY);)o(r).forEach(u);return t}return oe}var de,lr;function Dt(){if(lr)return de;lr=1;var v=Kr();de=p;function p(h,d,s){return h.nodes().reduce(function(i,e){return i[e]=v(h,e,d,s),i},{})}return de}var le,ur;function Zr(){if(ur)return le;ur=1,le=v;function v(p){var h=0,d=[],s={},i=[];function e(o){var t=s[o]={onStack:!0,lowlink:h,index:h++};if(d.push(o),p.successors(o).forEach(function(n){Object.hasOwn(s,n)?s[n].onStack&&(t.lowlink=Math.min(t.lowlink,s[n].index)):(e(n),t.lowlink=Math.min(t.lowlink,s[n].lowlink))}),t.lowlink===t.index){var a=[],r;do r=d.pop(),s[r].onStack=!1,a.push(r);while(o!==r);i.push(a)}}return p.nodes().forEach(function(o){Object.hasOwn(s,o)||e(o)}),i}return le}var ue,hr;function Pt(){if(hr)return ue;hr=1;var v=Zr();ue=p;function p(h){return v(h).filter(function(d){return d.length>1||d.length===1&&h.hasEdge(d[0],d[0])})}return ue}var he,cr;function Mt(){if(cr)return he;cr=1,he=p;var v=()=>1;function p(d,s,i){return h(d,s||v,i||function(e){return d.outEdges(e)})}function h(d,s,i){var e={},o=d.nodes();return o.forEach(function(t){e[t]={},e[t][t]={distance:0},o.forEach(function(a){t!==a&&(e[t][a]={distance:Number.POSITIVE_INFINITY})}),i(t).forEach(function(a){var r=a.v===t?a.w:a.v,n=s(a);e[t][r]={distance:n,predecessor:t}})}),o.forEach(function(t){var a=e[t];o.forEach(function(r){var n=e[r];o.forEach(function(u){var c=n[t],w=a[u],R=n[u],m=c.distance+w.distance;m<R.distance&&(R.distance=m,R.predecessor=w.predecessor)})})}),e}return he}var ce,fr;function et(){if(fr)return ce;fr=1;function v(h){var d={},s={},i=[];function e(o){if(Object.hasOwn(s,o))throw new p;Object.hasOwn(d,o)||(s[o]=!0,d[o]=!0,h.predecessors(o).forEach(e),delete s[o],i.push(o))}if(h.sinks().forEach(e),Object.keys(d).length!==h.nodeCount())throw new p;return i}class p extends Error{constructor(){super(...arguments)}}return ce=v,v.CycleException=p,ce}var fe,pr;function Ft(){if(pr)return fe;pr=1;var v=et();fe=p;function p(h){try{v(h)}catch(d){if(d instanceof v.CycleException)return!1;throw d}return!0}return fe}var pe,mr;function rt(){if(mr)return pe;mr=1,pe=v;function v(s,i,e){Array.isArray(i)||(i=[i]);var o=s.isDirected()?n=>s.successors(n):n=>s.neighbors(n),t=e==="post"?p:h,a=[],r={};return i.forEach(n=>{if(!s.hasNode(n))throw new Error("Graph does not have node: "+n);t(n,o,r,a)}),a}function p(s,i,e,o){for(var t=[[s,!1]];t.length>0;){var a=t.pop();a[1]?o.push(a[0]):Object.hasOwn(e,a[0])||(e[a[0]]=!0,t.push([a[0],!0]),d(i(a[0]),r=>t.push([r,!1])))}}function h(s,i,e,o){for(var t=[s];t.length>0;){var a=t.pop();Object.hasOwn(e,a)||(e[a]=!0,o.push(a),d(i(a),r=>t.push(r)))}}function d(s,i){for(var e=s.length;e--;)i(s[e],e,s);return s}return pe}var me,br;function Gt(){if(br)return me;br=1;var v=rt();me=p;function p(h,d){return v(h,d,"post")}return me}var be,gr;function At(){if(gr)return be;gr=1;var v=rt();be=p;function p(h,d){return v(h,d,"pre")}return be}var ge,vr;function Vt(){if(vr)return ge;vr=1;var v=He(),p=Jr();ge=h;function h(d,s){var i=new v,e={},o=new p,t;function a(n){var u=n.v===t?n.w:n.v,c=o.priority(u);if(c!==void 0){var w=s(n);w<c&&(e[u]=t,o.decrease(u,w))}}if(d.nodeCount()===0)return i;d.nodes().forEach(function(n){o.add(n,Number.POSITIVE_INFINITY),i.setNode(n)}),o.decrease(d.nodes()[0],0);for(var r=!1;o.size()>0;){if(t=o.removeMin(),Object.hasOwn(e,t))i.setEdge(t,e[t]);else{if(r)throw new Error("Input graph is not connected: "+d);r=!0}d.nodeEdges(t).forEach(a)}return i}return ge}var ve,wr;function Bt(){return wr||(wr=1,ve={components:Tt(),dijkstra:Kr(),dijkstraAll:Dt(),findCycles:Pt(),floydWarshall:Mt(),isAcyclic:Ft(),postorder:Gt(),preorder:At(),prim:Vt(),tarjan:Zr(),topsort:et()}),ve}var we,Er;function $(){if(Er)return we;Er=1;var v=qt();return we={Graph:v.Graph,json:St(),alg:Bt(),version:v.version},we}var Ee,yr;function Wt(){if(yr)return Ee;yr=1;class v{constructor(){let s={};s._next=s._prev=s,this._sentinel=s}dequeue(){let s=this._sentinel,i=s._prev;if(i!==s)return p(i),i}enqueue(s){let i=this._sentinel;s._prev&&s._next&&p(s),s._next=i._next,i._next._prev=s,i._next=s,s._prev=i}toString(){let s=[],i=this._sentinel,e=i._prev;for(;e!==i;)s.push(JSON.stringify(e,h)),e=e._prev;return"["+s.join(", ")+"]"}}function p(d){d._prev._next=d._next,d._next._prev=d._prev,delete d._next,delete d._prev}function h(d,s){if(d!=="_next"&&d!=="_prev")return s}return Ee=v,Ee}var ye,_r;function Yt(){if(_r)return ye;_r=1;let v=$().Graph,p=Wt();ye=d;let h=()=>1;function d(a,r){if(a.nodeCount()<=1)return[];let n=e(a,r||h);return s(n.graph,n.buckets,n.zeroIdx).flatMap(c=>a.outEdges(c.v,c.w))}function s(a,r,n){let u=[],c=r[r.length-1],w=r[0],R;for(;a.nodeCount();){for(;R=w.dequeue();)i(a,r,n,R);for(;R=c.dequeue();)i(a,r,n,R);if(a.nodeCount()){for(let m=r.length-2;m>0;--m)if(R=r[m].dequeue(),R){u=u.concat(i(a,r,n,R,!0));break}}}return u}function i(a,r,n,u,c){let w=c?[]:void 0;return a.inEdges(u.v).forEach(R=>{let m=a.edge(R),N=a.node(R.v);c&&w.push({v:R.v,w:R.w}),N.out-=m,o(r,n,N)}),a.outEdges(u.v).forEach(R=>{let m=a.edge(R),N=R.w,b=a.node(N);b.in-=m,o(r,n,b)}),a.removeNode(u.v),w}function e(a,r){let n=new v,u=0,c=0;a.nodes().forEach(m=>{n.setNode(m,{v:m,in:0,out:0})}),a.edges().forEach(m=>{let N=n.edge(m.v,m.w)||0,b=r(m),_=N+b;n.setEdge(m.v,m.w,_),c=Math.max(c,n.node(m.v).out+=b),u=Math.max(u,n.node(m.w).in+=b)});let w=t(c+u+3).map(()=>new p),R=u+1;return n.nodes().forEach(m=>{o(w,R,n.node(m))}),{graph:n,buckets:w,zeroIdx:R}}function o(a,r,n){n.out?n.in?a[n.out-n.in+r].enqueue(n):a[a.length-1].enqueue(n):a[0].enqueue(n)}function t(a){const r=[];for(let n=0;n<a;n++)r.push(n);return r}return ye}var _e,xr;function V(){if(xr)return _e;xr=1;let v=$().Graph;_e={addBorderNode:r,addDummyNode:p,applyWithChunking:c,asNonCompoundGraph:d,buildLayerMatrix:o,intersectRect:e,mapValues:E,maxRank:w,normalizeRanks:t,notime:N,partition:R,pick:I,predecessorWeights:i,range:j,removeEmptyRanks:a,simplify:h,successorWeights:s,time:m,uniqueId:_,zipObject:L};function p(l,f,y,x){let O;do O=_(x);while(l.hasNode(O));return y.dummy=f,l.setNode(O,y),O}function h(l){let f=new v().setGraph(l.graph());return l.nodes().forEach(y=>f.setNode(y,l.node(y))),l.edges().forEach(y=>{let x=f.edge(y.v,y.w)||{weight:0,minlen:1},O=l.edge(y);f.setEdge(y.v,y.w,{weight:x.weight+O.weight,minlen:Math.max(x.minlen,O.minlen)})}),f}function d(l){let f=new v({multigraph:l.isMultigraph()}).setGraph(l.graph());return l.nodes().forEach(y=>{l.children(y).length||f.setNode(y,l.node(y))}),l.edges().forEach(y=>{f.setEdge(y,l.edge(y))}),f}function s(l){let f=l.nodes().map(y=>{let x={};return l.outEdges(y).forEach(O=>{x[O.w]=(x[O.w]||0)+l.edge(O).weight}),x});return L(l.nodes(),f)}function i(l){let f=l.nodes().map(y=>{let x={};return l.inEdges(y).forEach(O=>{x[O.v]=(x[O.v]||0)+l.edge(O).weight}),x});return L(l.nodes(),f)}function e(l,f){let y=l.x,x=l.y,O=f.x-y,T=f.y-x,D=l.width/2,F=l.height/2;if(!O&&!T)throw new Error("Not possible to find intersection inside of the rectangle");let U,H;return Math.abs(T)*D>Math.abs(O)*F?(T<0&&(F=-F),U=F*O/T,H=F):(O<0&&(D=-D),U=D,H=D*T/O),{x:y+U,y:x+H}}function o(l){let f=j(w(l)+1).map(()=>[]);return l.nodes().forEach(y=>{let x=l.node(y),O=x.rank;O!==void 0&&(f[O][x.order]=y)}),f}function t(l){let f=l.nodes().map(x=>{let O=l.node(x).rank;return O===void 0?Number.MAX_VALUE:O}),y=c(Math.min,f);l.nodes().forEach(x=>{let O=l.node(x);Object.hasOwn(O,"rank")&&(O.rank-=y)})}function a(l){let f=l.nodes().map(D=>l.node(D).rank),y=c(Math.min,f),x=[];l.nodes().forEach(D=>{let F=l.node(D).rank-y;x[F]||(x[F]=[]),x[F].push(D)});let O=0,T=l.graph().nodeRankFactor;Array.from(x).forEach((D,F)=>{D===void 0&&F%T!==0?--O:D!==void 0&&O&&D.forEach(U=>l.node(U).rank+=O)})}function r(l,f,y,x){let O={width:0,height:0};return arguments.length>=4&&(O.rank=y,O.order=x),p(l,"border",O,f)}function n(l,f=u){const y=[];for(let x=0;x<l.length;x+=f){const O=l.slice(x,x+f);y.push(O)}return y}const u=65535;function c(l,f){if(f.length>u){const y=n(f);return l.apply(null,y.map(x=>l.apply(null,x)))}else return l.apply(null,f)}function w(l){const y=l.nodes().map(x=>{let O=l.node(x).rank;return O===void 0?Number.MIN_VALUE:O});return c(Math.max,y)}function R(l,f){let y={lhs:[],rhs:[]};return l.forEach(x=>{f(x)?y.lhs.push(x):y.rhs.push(x)}),y}function m(l,f){let y=Date.now();try{return f()}finally{console.log(l+" time: "+(Date.now()-y)+"ms")}}function N(l,f){return f()}let b=0;function _(l){var f=++b;return toString(l)+f}function j(l,f,y=1){f==null&&(f=l,l=0);let x=T=>T<f;y<0&&(x=T=>f<T);const O=[];for(let T=l;x(T);T+=y)O.push(T);return O}function I(l,f){const y={};for(const x of f)l[x]!==void 0&&(y[x]=l[x]);return y}function E(l,f){let y=f;return typeof f=="string"&&(y=x=>x[f]),Object.entries(l).reduce((x,[O,T])=>(x[O]=y(T,O),x),{})}function L(l,f){return l.reduce((y,x,O)=>(y[x]=f[O],y),{})}return _e}var xe,kr;function zt(){if(kr)return xe;kr=1;let v=Yt(),p=V().uniqueId;xe={run:h,undo:s};function h(i){(i.graph().acyclicer==="greedy"?v(i,o(i)):d(i)).forEach(t=>{let a=i.edge(t);i.removeEdge(t),a.forwardName=t.name,a.reversed=!0,i.setEdge(t.w,t.v,a,p("rev"))});function o(t){return a=>t.edge(a).weight}}function d(i){let e=[],o={},t={};function a(r){Object.hasOwn(t,r)||(t[r]=!0,o[r]=!0,i.outEdges(r).forEach(n=>{Object.hasOwn(o,n.w)?e.push(n):a(n.w)}),delete o[r])}return i.nodes().forEach(a),e}function s(i){i.edges().forEach(e=>{let o=i.edge(e);if(o.reversed){i.removeEdge(e);let t=o.forwardName;delete o.reversed,delete o.forwardName,i.setEdge(e.w,e.v,o,t)}})}return xe}var ke,Nr;function $t(){if(Nr)return ke;Nr=1;let v=V();ke={run:p,undo:d};function p(s){s.graph().dummyChains=[],s.edges().forEach(i=>h(s,i))}function h(s,i){let e=i.v,o=s.node(e).rank,t=i.w,a=s.node(t).rank,r=i.name,n=s.edge(i),u=n.labelRank;if(a===o+1)return;s.removeEdge(i);let c,w,R;for(R=0,++o;o<a;++R,++o)n.points=[],w={width:0,height:0,edgeLabel:n,edgeObj:i,rank:o},c=v.addDummyNode(s,"edge",w,"_d"),o===u&&(w.width=n.width,w.height=n.height,w.dummy="edge-label",w.labelpos=n.labelpos),s.setEdge(e,c,{weight:n.weight},r),R===0&&s.graph().dummyChains.push(c),e=c;s.setEdge(e,t,{weight:n.weight},r)}function d(s){s.graph().dummyChains.forEach(i=>{let e=s.node(i),o=e.edgeLabel,t;for(s.setEdge(e.edgeObj,o);e.dummy;)t=s.successors(i)[0],s.removeNode(i),o.points.push({x:e.x,y:e.y}),e.dummy==="edge-label"&&(o.x=e.x,o.y=e.y,o.width=e.width,o.height=e.height),i=t,e=s.node(i)})}return ke}var Ne,jr;function K(){if(jr)return Ne;jr=1;const{applyWithChunking:v}=V();Ne={longestPath:p,slack:h};function p(d){var s={};function i(e){var o=d.node(e);if(Object.hasOwn(s,e))return o.rank;s[e]=!0;let t=d.outEdges(e).map(r=>r==null?Number.POSITIVE_INFINITY:i(r.w)-d.edge(r).minlen);var a=v(Math.min,t);return a===Number.POSITIVE_INFINITY&&(a=0),o.rank=a}d.sources().forEach(i)}function h(d,s){return d.node(s.w).rank-d.node(s.v).rank-d.edge(s).minlen}return Ne}var je,Or;function tt(){if(Or)return je;Or=1;var v=$().Graph,p=K().slack;je=h;function h(e){var o=new v({directed:!1}),t=e.nodes()[0],a=e.nodeCount();o.setNode(t,{});for(var r,n;d(o,e)<a;)r=s(o,e),n=o.hasNode(r.v)?p(e,r):-p(e,r),i(o,e,n);return o}function d(e,o){function t(a){o.nodeEdges(a).forEach(r=>{var n=r.v,u=a===n?r.w:n;!e.hasNode(u)&&!p(o,r)&&(e.setNode(u,{}),e.setEdge(a,u,{}),t(u))})}return e.nodes().forEach(t),e.nodeCount()}function s(e,o){return o.edges().reduce((a,r)=>{let n=Number.POSITIVE_INFINITY;return e.hasNode(r.v)!==e.hasNode(r.w)&&(n=p(o,r)),n<a[0]?[n,r]:a},[Number.POSITIVE_INFINITY,null])[1]}function i(e,o,t){e.nodes().forEach(a=>o.node(a).rank+=t)}return je}var Oe,Cr;function Ut(){if(Cr)return Oe;Cr=1;var v=tt(),p=K().slack,h=K().longestPath,d=$().alg.preorder,s=$().alg.postorder,i=V().simplify;Oe=e,e.initLowLimValues=r,e.initCutValues=o,e.calcCutValue=a,e.leaveEdge=u,e.enterEdge=c,e.exchangeEdges=w;function e(b){b=i(b),h(b);var _=v(b);r(_),o(_,b);for(var j,I;j=u(_);)I=c(_,b,j),w(_,b,j,I)}function o(b,_){var j=s(b,b.nodes());j=j.slice(0,j.length-1),j.forEach(I=>t(b,_,I))}function t(b,_,j){var I=b.node(j),E=I.parent;b.edge(j,E).cutvalue=a(b,_,j)}function a(b,_,j){var I=b.node(j),E=I.parent,L=!0,l=_.edge(j,E),f=0;return l||(L=!1,l=_.edge(E,j)),f=l.weight,_.nodeEdges(j).forEach(y=>{var x=y.v===j,O=x?y.w:y.v;if(O!==E){var T=x===L,D=_.edge(y).weight;if(f+=T?D:-D,m(b,j,O)){var F=b.edge(j,O).cutvalue;f+=T?-F:F}}}),f}function r(b,_){arguments.length<2&&(_=b.nodes()[0]),n(b,{},1,_)}function n(b,_,j,I,E){var L=j,l=b.node(I);return _[I]=!0,b.neighbors(I).forEach(f=>{Object.hasOwn(_,f)||(j=n(b,_,j,f,I))}),l.low=L,l.lim=j++,E?l.parent=E:delete l.parent,j}function u(b){return b.edges().find(_=>b.edge(_).cutvalue<0)}function c(b,_,j){var I=j.v,E=j.w;_.hasEdge(I,E)||(I=j.w,E=j.v);var L=b.node(I),l=b.node(E),f=L,y=!1;L.lim>l.lim&&(f=l,y=!0);var x=_.edges().filter(O=>y===N(b,b.node(O.v),f)&&y!==N(b,b.node(O.w),f));return x.reduce((O,T)=>p(_,T)<p(_,O)?T:O)}function w(b,_,j,I){var E=j.v,L=j.w;b.removeEdge(E,L),b.setEdge(I.v,I.w,{}),r(b),o(b,_),R(b,_)}function R(b,_){var j=b.nodes().find(E=>!_.node(E).parent),I=d(b,j);I=I.slice(1),I.forEach(E=>{var L=b.node(E).parent,l=_.edge(E,L),f=!1;l||(l=_.edge(L,E),f=!0),_.node(E).rank=_.node(L).rank+(f?l.minlen:-l.minlen)})}function m(b,_,j){return b.hasEdge(_,j)}function N(b,_,j){return j.low<=_.lim&&_.lim<=j.lim}return Oe}var Ce,Rr;function Ht(){if(Rr)return Ce;Rr=1;var v=K(),p=v.longestPath,h=tt(),d=Ut();Ce=s;function s(t){switch(t.graph().ranker){case"network-simplex":o(t);break;case"tight-tree":e(t);break;case"longest-path":i(t);break;default:o(t)}}var i=p;function e(t){p(t),h(t)}function o(t){d(t)}return Ce}var Re,Ir;function Qt(){if(Ir)return Re;Ir=1,Re=v;function v(d){let s=h(d);d.graph().dummyChains.forEach(i=>{let e=d.node(i),o=e.edgeObj,t=p(d,s,o.v,o.w),a=t.path,r=t.lca,n=0,u=a[n],c=!0;for(;i!==o.w;){if(e=d.node(i),c){for(;(u=a[n])!==r&&d.node(u).maxRank<e.rank;)n++;u===r&&(c=!1)}if(!c){for(;n<a.length-1&&d.node(u=a[n+1]).minRank<=e.rank;)n++;u=a[n]}d.setParent(i,u),i=d.successors(i)[0]}})}function p(d,s,i,e){let o=[],t=[],a=Math.min(s[i].low,s[e].low),r=Math.max(s[i].lim,s[e].lim),n,u;n=i;do n=d.parent(n),o.push(n);while(n&&(s[n].low>a||r>s[n].lim));for(u=n,n=e;(n=d.parent(n))!==u;)t.push(n);return{path:o.concat(t.reverse()),lca:u}}function h(d){let s={},i=0;function e(o){let t=i;d.children(o).forEach(e),s[o]={low:t,lim:i++}}return d.children().forEach(e),s}return Re}var Ie,Lr;function Xt(){if(Lr)return Ie;Lr=1;let v=V();Ie={run:p,cleanup:i};function p(e){let o=v.addDummyNode(e,"root",{},"_root"),t=d(e),a=Object.values(t),r=v.applyWithChunking(Math.max,a)-1,n=2*r+1;e.graph().nestingRoot=o,e.edges().forEach(c=>e.edge(c).minlen*=n);let u=s(e)+1;e.children().forEach(c=>h(e,o,n,u,r,t,c)),e.graph().nodeRankFactor=n}function h(e,o,t,a,r,n,u){let c=e.children(u);if(!c.length){u!==o&&e.setEdge(o,u,{weight:0,minlen:t});return}let w=v.addBorderNode(e,"_bt"),R=v.addBorderNode(e,"_bb"),m=e.node(u);e.setParent(w,u),m.borderTop=w,e.setParent(R,u),m.borderBottom=R,c.forEach(N=>{h(e,o,t,a,r,n,N);let b=e.node(N),_=b.borderTop?b.borderTop:N,j=b.borderBottom?b.borderBottom:N,I=b.borderTop?a:2*a,E=_!==j?1:r-n[u]+1;e.setEdge(w,_,{weight:I,minlen:E,nestingEdge:!0}),e.setEdge(j,R,{weight:I,minlen:E,nestingEdge:!0})}),e.parent(u)||e.setEdge(o,w,{weight:0,minlen:r+n[u]})}function d(e){var o={};function t(a,r){var n=e.children(a);n&&n.length&&n.forEach(u=>t(u,r+1)),o[a]=r}return e.children().forEach(a=>t(a,1)),o}function s(e){return e.edges().reduce((o,t)=>o+e.edge(t).weight,0)}function i(e){var o=e.graph();e.removeNode(o.nestingRoot),delete o.nestingRoot,e.edges().forEach(t=>{var a=e.edge(t);a.nestingEdge&&e.removeEdge(t)})}return Ie}var Le,qr;function Jt(){if(qr)return Le;qr=1;let v=V();Le=p;function p(d){function s(i){let e=d.children(i),o=d.node(i);if(e.length&&e.forEach(s),Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let t=o.minRank,a=o.maxRank+1;t<a;++t)h(d,"borderLeft","_bl",i,o,t),h(d,"borderRight","_br",i,o,t)}}d.children().forEach(s)}function h(d,s,i,e,o,t){let a={width:0,height:0,rank:t,borderType:s},r=o[s][t-1],n=v.addDummyNode(d,"border",a,i);o[s][t]=n,d.setParent(n,e),r&&d.setEdge(r,n,{weight:1})}return Le}var qe,Sr;function Kt(){if(Sr)return qe;Sr=1,qe={adjust:v,undo:p};function v(t){let a=t.graph().rankdir.toLowerCase();(a==="lr"||a==="rl")&&h(t)}function p(t){let a=t.graph().rankdir.toLowerCase();(a==="bt"||a==="rl")&&s(t),(a==="lr"||a==="rl")&&(e(t),h(t))}function h(t){t.nodes().forEach(a=>d(t.node(a))),t.edges().forEach(a=>d(t.edge(a)))}function d(t){let a=t.width;t.width=t.height,t.height=a}function s(t){t.nodes().forEach(a=>i(t.node(a))),t.edges().forEach(a=>{let r=t.edge(a);r.points.forEach(i),Object.hasOwn(r,"y")&&i(r)})}function i(t){t.y=-t.y}function e(t){t.nodes().forEach(a=>o(t.node(a))),t.edges().forEach(a=>{let r=t.edge(a);r.points.forEach(o),Object.hasOwn(r,"x")&&o(r)})}function o(t){let a=t.x;t.x=t.y,t.y=a}return qe}var Se,Tr;function Zt(){if(Tr)return Se;Tr=1;let v=V();Se=p;function p(h){let d={},s=h.nodes().filter(r=>!h.children(r).length),i=s.map(r=>h.node(r).rank),e=v.applyWithChunking(Math.max,i),o=v.range(e+1).map(()=>[]);function t(r){if(d[r])return;d[r]=!0;let n=h.node(r);o[n.rank].push(r),h.successors(r).forEach(t)}return s.sort((r,n)=>h.node(r).rank-h.node(n).rank).forEach(t),o}return Se}var Te,Dr;function en(){if(Dr)return Te;Dr=1;let v=V().zipObject;Te=p;function p(d,s){let i=0;for(let e=1;e<s.length;++e)i+=h(d,s[e-1],s[e]);return i}function h(d,s,i){let e=v(i,i.map((u,c)=>c)),o=s.flatMap(u=>d.outEdges(u).map(c=>({pos:e[c.w],weight:d.edge(c).weight})).sort((c,w)=>c.pos-w.pos)),t=1;for(;t<i.length;)t<<=1;let a=2*t-1;t-=1;let r=new Array(a).fill(0),n=0;return o.forEach(u=>{let c=u.pos+t;r[c]+=u.weight;let w=0;for(;c>0;)c%2&&(w+=r[c+1]),c=c-1>>1,r[c]+=u.weight;n+=u.weight*w}),n}return Te}var De,Pr;function rn(){if(Pr)return De;Pr=1,De=v;function v(p,h=[]){return h.map(d=>{let s=p.inEdges(d);if(s.length){let i=s.reduce((e,o)=>{let t=p.edge(o),a=p.node(o.v);return{sum:e.sum+t.weight*a.order,weight:e.weight+t.weight}},{sum:0,weight:0});return{v:d,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:d}})}return De}var Pe,Mr;function tn(){if(Mr)return Pe;Mr=1;let v=V();Pe=p;function p(s,i){let e={};s.forEach((t,a)=>{let r=e[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:a};t.barycenter!==void 0&&(r.barycenter=t.barycenter,r.weight=t.weight)}),i.edges().forEach(t=>{let a=e[t.v],r=e[t.w];a!==void 0&&r!==void 0&&(r.indegree++,a.out.push(e[t.w]))});let o=Object.values(e).filter(t=>!t.indegree);return h(o)}function h(s){let i=[];function e(t){return a=>{a.merged||(a.barycenter===void 0||t.barycenter===void 0||a.barycenter>=t.barycenter)&&d(t,a)}}function o(t){return a=>{a.in.push(t),--a.indegree===0&&s.push(a)}}for(;s.length;){let t=s.pop();i.push(t),t.in.reverse().forEach(e(t)),t.out.forEach(o(t))}return i.filter(t=>!t.merged).map(t=>v.pick(t,["vs","i","barycenter","weight"]))}function d(s,i){let e=0,o=0;s.weight&&(e+=s.barycenter*s.weight,o+=s.weight),i.weight&&(e+=i.barycenter*i.weight,o+=i.weight),s.vs=i.vs.concat(s.vs),s.barycenter=e/o,s.weight=o,s.i=Math.min(i.i,s.i),i.merged=!0}return Pe}var Me,Fr;function nn(){if(Fr)return Me;Fr=1;let v=V();Me=p;function p(s,i){let e=v.partition(s,w=>Object.hasOwn(w,"barycenter")),o=e.lhs,t=e.rhs.sort((w,R)=>R.i-w.i),a=[],r=0,n=0,u=0;o.sort(d(!!i)),u=h(a,t,u),o.forEach(w=>{u+=w.vs.length,a.push(w.vs),r+=w.barycenter*w.weight,n+=w.weight,u=h(a,t,u)});let c={vs:a.flat(!0)};return n&&(c.barycenter=r/n,c.weight=n),c}function h(s,i,e){let o;for(;i.length&&(o=i[i.length-1]).i<=e;)i.pop(),s.push(o.vs),e++;return e}function d(s){return(i,e)=>i.barycenter<e.barycenter?-1:i.barycenter>e.barycenter?1:s?e.i-i.i:i.i-e.i}return Me}var Fe,Gr;function an(){if(Gr)return Fe;Gr=1;let v=rn(),p=tn(),h=nn();Fe=d;function d(e,o,t,a){let r=e.children(o),n=e.node(o),u=n?n.borderLeft:void 0,c=n?n.borderRight:void 0,w={};u&&(r=r.filter(b=>b!==u&&b!==c));let R=v(e,r);R.forEach(b=>{if(e.children(b.v).length){let _=d(e,b.v,t,a);w[b.v]=_,Object.hasOwn(_,"barycenter")&&i(b,_)}});let m=p(R,t);s(m,w);let N=h(m,a);if(u&&(N.vs=[u,N.vs,c].flat(!0),e.predecessors(u).length)){let b=e.node(e.predecessors(u)[0]),_=e.node(e.predecessors(c)[0]);Object.hasOwn(N,"barycenter")||(N.barycenter=0,N.weight=0),N.barycenter=(N.barycenter*N.weight+b.order+_.order)/(N.weight+2),N.weight+=2}return N}function s(e,o){e.forEach(t=>{t.vs=t.vs.flatMap(a=>o[a]?o[a].vs:a)})}function i(e,o){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+o.barycenter*o.weight)/(e.weight+o.weight),e.weight+=o.weight):(e.barycenter=o.barycenter,e.weight=o.weight)}return Fe}var Ge,Ar;function sn(){if(Ar)return Ge;Ar=1;let v=$().Graph,p=V();Ge=h;function h(s,i,e){let o=d(s),t=new v({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(a=>s.node(a));return s.nodes().forEach(a=>{let r=s.node(a),n=s.parent(a);(r.rank===i||r.minRank<=i&&i<=r.maxRank)&&(t.setNode(a),t.setParent(a,n||o),s[e](a).forEach(u=>{let c=u.v===a?u.w:u.v,w=t.edge(c,a),R=w!==void 0?w.weight:0;t.setEdge(c,a,{weight:s.edge(u).weight+R})}),Object.hasOwn(r,"minRank")&&t.setNode(a,{borderLeft:r.borderLeft[i],borderRight:r.borderRight[i]}))}),t}function d(s){for(var i;s.hasNode(i=p.uniqueId("_root")););return i}return Ge}var Ae,Vr;function on(){if(Vr)return Ae;Vr=1,Ae=v;function v(p,h,d){let s={},i;d.forEach(e=>{let o=p.parent(e),t,a;for(;o;){if(t=p.parent(o),t?(a=s[t],s[t]=o):(a=i,i=o),a&&a!==o){h.setEdge(a,o);return}o=t}})}return Ae}var Ve,Br;function dn(){if(Br)return Ve;Br=1;let v=Zt(),p=en(),h=an(),d=sn(),s=on(),i=$().Graph,e=V();Ve=o;function o(n,u){if(u&&typeof u.customOrder=="function"){u.customOrder(n,o);return}let c=e.maxRank(n),w=t(n,e.range(1,c+1),"inEdges"),R=t(n,e.range(c-1,-1,-1),"outEdges"),m=v(n);if(r(n,m),u&&u.disableOptimalOrderHeuristic)return;let N=Number.POSITIVE_INFINITY,b;for(let _=0,j=0;j<4;++_,++j){a(_%2?w:R,_%4>=2),m=e.buildLayerMatrix(n);let I=p(n,m);I<N&&(j=0,b=Object.assign({},m),N=I)}r(n,b)}function t(n,u,c){return u.map(function(w){return d(n,w,c)})}function a(n,u){let c=new i;n.forEach(function(w){let R=w.graph().root,m=h(w,R,c,u);m.vs.forEach((N,b)=>w.node(N).order=b),s(w,c,m.vs)})}function r(n,u){Object.values(u).forEach(c=>c.forEach((w,R)=>n.node(w).order=R))}return Ve}var Be,Wr;function ln(){if(Wr)return Be;Wr=1;let v=$().Graph,p=V();Be={positionX:c,findType1Conflicts:h,findType2Conflicts:d,addConflict:i,hasConflict:e,verticalAlignment:o,horizontalCompaction:t,alignCoordinates:n,findSmallestWidthAlignment:r,balance:u};function h(m,N){let b={};function _(j,I){let E=0,L=0,l=j.length,f=I[I.length-1];return I.forEach((y,x)=>{let O=s(m,y),T=O?m.node(O).order:l;(O||y===f)&&(I.slice(L,x+1).forEach(D=>{m.predecessors(D).forEach(F=>{let U=m.node(F),H=U.order;(H<E||T<H)&&!(U.dummy&&m.node(D).dummy)&&i(b,F,D)})}),L=x+1,E=T)}),I}return N.length&&N.reduce(_),b}function d(m,N){let b={};function _(I,E,L,l,f){let y;p.range(E,L).forEach(x=>{y=I[x],m.node(y).dummy&&m.predecessors(y).forEach(O=>{let T=m.node(O);T.dummy&&(T.order<l||T.order>f)&&i(b,O,y)})})}function j(I,E){let L=-1,l,f=0;return E.forEach((y,x)=>{if(m.node(y).dummy==="border"){let O=m.predecessors(y);O.length&&(l=m.node(O[0]).order,_(E,f,x,L,l),f=x,L=l)}_(E,f,E.length,l,I.length)}),E}return N.length&&N.reduce(j),b}function s(m,N){if(m.node(N).dummy)return m.predecessors(N).find(b=>m.node(b).dummy)}function i(m,N,b){if(N>b){let j=N;N=b,b=j}let _=m[N];_||(m[N]=_={}),_[b]=!0}function e(m,N,b){if(N>b){let _=N;N=b,b=_}return!!m[N]&&Object.hasOwn(m[N],b)}function o(m,N,b,_){let j={},I={},E={};return N.forEach(L=>{L.forEach((l,f)=>{j[l]=l,I[l]=l,E[l]=f})}),N.forEach(L=>{let l=-1;L.forEach(f=>{let y=_(f);if(y.length){y=y.sort((O,T)=>E[O]-E[T]);let x=(y.length-1)/2;for(let O=Math.floor(x),T=Math.ceil(x);O<=T;++O){let D=y[O];I[f]===f&&l<E[D]&&!e(b,f,D)&&(I[D]=f,I[f]=j[f]=j[D],l=E[D])}}})}),{root:j,align:I}}function t(m,N,b,_,j){let I={},E=a(m,N,b,j),L=j?"borderLeft":"borderRight";function l(x,O){let T=E.nodes(),D=T.pop(),F={};for(;D;)F[D]?x(D):(F[D]=!0,T.push(D),T=T.concat(O(D))),D=T.pop()}function f(x){I[x]=E.inEdges(x).reduce((O,T)=>Math.max(O,I[T.v]+E.edge(T)),0)}function y(x){let O=E.outEdges(x).reduce((D,F)=>Math.min(D,I[F.w]-E.edge(F)),Number.POSITIVE_INFINITY),T=m.node(x);O!==Number.POSITIVE_INFINITY&&T.borderType!==L&&(I[x]=Math.max(I[x],O))}return l(f,E.predecessors.bind(E)),l(y,E.successors.bind(E)),Object.keys(_).forEach(x=>I[x]=I[b[x]]),I}function a(m,N,b,_){let j=new v,I=m.graph(),E=w(I.nodesep,I.edgesep,_);return N.forEach(L=>{let l;L.forEach(f=>{let y=b[f];if(j.setNode(y),l){var x=b[l],O=j.edge(x,y);j.setEdge(x,y,Math.max(E(m,f,l),O||0))}l=f})}),j}function r(m,N){return Object.values(N).reduce((b,_)=>{let j=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;Object.entries(_).forEach(([L,l])=>{let f=R(m,L)/2;j=Math.max(l+f,j),I=Math.min(l-f,I)});const E=j-I;return E<b[0]&&(b=[E,_]),b},[Number.POSITIVE_INFINITY,null])[1]}function n(m,N){let b=Object.values(N),_=p.applyWithChunking(Math.min,b),j=p.applyWithChunking(Math.max,b);["u","d"].forEach(I=>{["l","r"].forEach(E=>{let L=I+E,l=m[L];if(l===N)return;let f=Object.values(l),y=_-p.applyWithChunking(Math.min,f);E!=="l"&&(y=j-p.applyWithChunking(Math.max,f)),y&&(m[L]=p.mapValues(l,x=>x+y))})})}function u(m,N){return p.mapValues(m.ul,(b,_)=>{if(N)return m[N.toLowerCase()][_];{let j=Object.values(m).map(I=>I[_]).sort((I,E)=>I-E);return(j[1]+j[2])/2}})}function c(m){let N=p.buildLayerMatrix(m),b=Object.assign(h(m,N),d(m,N)),_={},j;["u","d"].forEach(E=>{j=E==="u"?N:Object.values(N).reverse(),["l","r"].forEach(L=>{L==="r"&&(j=j.map(x=>Object.values(x).reverse()));let l=(E==="u"?m.predecessors:m.successors).bind(m),f=o(m,j,b,l),y=t(m,j,f.root,f.align,L==="r");L==="r"&&(y=p.mapValues(y,x=>-x)),_[E+L]=y})});let I=r(m,_);return n(_,I),u(_,m.graph().align)}function w(m,N,b){return(_,j,I)=>{let E=_.node(j),L=_.node(I),l=0,f;if(l+=E.width/2,Object.hasOwn(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":f=-E.width/2;break;case"r":f=E.width/2;break}if(f&&(l+=b?f:-f),f=0,l+=(E.dummy?N:m)/2,l+=(L.dummy?N:m)/2,l+=L.width/2,Object.hasOwn(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":f=L.width/2;break;case"r":f=-L.width/2;break}return f&&(l+=b?f:-f),f=0,l}}function R(m,N){return m.node(N).width}return Be}var We,Yr;function un(){if(Yr)return We;Yr=1;let v=V(),p=ln().positionX;We=h;function h(s){s=v.asNonCompoundGraph(s),d(s),Object.entries(p(s)).forEach(([i,e])=>s.node(i).x=e)}function d(s){let i=v.buildLayerMatrix(s),e=s.graph().ranksep,o=0;i.forEach(t=>{const a=t.reduce((r,n)=>{const u=s.node(n).height;return r>u?r:u},0);t.forEach(r=>s.node(r).y=o+a/2),o+=a+e})}return We}var Ye,zr;function hn(){if(zr)return Ye;zr=1;let v=zt(),p=$t(),h=Ht(),d=V().normalizeRanks,s=Qt(),i=V().removeEmptyRanks,e=Xt(),o=Jt(),t=Kt(),a=dn(),r=un(),n=V(),u=$().Graph;Ye=c;function c(g,k){let C=k&&k.debugTiming?n.time:n.notime;C("layout",()=>{let q=C("  buildLayoutGraph",()=>l(g));C("  runLayout",()=>w(q,C,k)),C("  updateInputGraph",()=>R(g,q))})}function w(g,k,C){k("    makeSpaceForEdgeLabels",()=>f(g)),k("    removeSelfEdges",()=>nt(g)),k("    acyclic",()=>v.run(g)),k("    nestingGraph.run",()=>e.run(g)),k("    rank",()=>h(n.asNonCompoundGraph(g))),k("    injectEdgeLabelProxies",()=>y(g)),k("    removeEmptyRanks",()=>i(g)),k("    nestingGraph.cleanup",()=>e.cleanup(g)),k("    normalizeRanks",()=>d(g)),k("    assignRankMinMax",()=>x(g)),k("    removeEdgeLabelProxies",()=>O(g)),k("    normalize.run",()=>p.run(g)),k("    parentDummyChains",()=>s(g)),k("    addBorderSegments",()=>o(g)),k("    order",()=>a(g,C)),k("    insertSelfEdges",()=>it(g)),k("    adjustCoordinateSystem",()=>t.adjust(g)),k("    position",()=>r(g)),k("    positionSelfEdges",()=>at(g)),k("    removeBorderNodes",()=>H(g)),k("    normalize.undo",()=>p.undo(g)),k("    fixupEdgeLabelCoords",()=>F(g)),k("    undoCoordinateSystem",()=>t.undo(g)),k("    translateGraph",()=>T(g)),k("    assignNodeIntersects",()=>D(g)),k("    reversePoints",()=>U(g)),k("    acyclic.undo",()=>v.undo(g))}function R(g,k){g.nodes().forEach(C=>{let q=g.node(C),P=k.node(C);q&&(q.x=P.x,q.y=P.y,q.rank=P.rank,k.children(C).length&&(q.width=P.width,q.height=P.height))}),g.edges().forEach(C=>{let q=g.edge(C),P=k.edge(C);q.points=P.points,Object.hasOwn(P,"x")&&(q.x=P.x,q.y=P.y)}),g.graph().width=k.graph().width,g.graph().height=k.graph().height}let m=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],j={width:0,height:0},I=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},L=["labelpos"];function l(g){let k=new u({multigraph:!0,compound:!0}),C=ee(g.graph());return k.setGraph(Object.assign({},N,Z(C,m),n.pick(C,b))),g.nodes().forEach(q=>{let P=ee(g.node(q));const M=Z(P,_);Object.keys(j).forEach(G=>{M[G]===void 0&&(M[G]=j[G])}),k.setNode(q,M),k.setParent(q,g.parent(q))}),g.edges().forEach(q=>{let P=ee(g.edge(q));k.setEdge(q,Object.assign({},E,Z(P,I),n.pick(P,L)))}),k}function f(g){let k=g.graph();k.ranksep/=2,g.edges().forEach(C=>{let q=g.edge(C);q.minlen*=2,q.labelpos.toLowerCase()!=="c"&&(k.rankdir==="TB"||k.rankdir==="BT"?q.width+=q.labeloffset:q.height+=q.labeloffset)})}function y(g){g.edges().forEach(k=>{let C=g.edge(k);if(C.width&&C.height){let q=g.node(k.v),M={rank:(g.node(k.w).rank-q.rank)/2+q.rank,e:k};n.addDummyNode(g,"edge-proxy",M,"_ep")}})}function x(g){let k=0;g.nodes().forEach(C=>{let q=g.node(C);q.borderTop&&(q.minRank=g.node(q.borderTop).rank,q.maxRank=g.node(q.borderBottom).rank,k=Math.max(k,q.maxRank))}),g.graph().maxRank=k}function O(g){g.nodes().forEach(k=>{let C=g.node(k);C.dummy==="edge-proxy"&&(g.edge(C.e).labelRank=C.rank,g.removeNode(k))})}function T(g){let k=Number.POSITIVE_INFINITY,C=0,q=Number.POSITIVE_INFINITY,P=0,M=g.graph(),G=M.marginx||0,Y=M.marginy||0;function Qe(z){let B=z.x,Q=z.y,Xe=z.width,Je=z.height;k=Math.min(k,B-Xe/2),C=Math.max(C,B+Xe/2),q=Math.min(q,Q-Je/2),P=Math.max(P,Q+Je/2)}g.nodes().forEach(z=>Qe(g.node(z))),g.edges().forEach(z=>{let B=g.edge(z);Object.hasOwn(B,"x")&&Qe(B)}),k-=G,q-=Y,g.nodes().forEach(z=>{let B=g.node(z);B.x-=k,B.y-=q}),g.edges().forEach(z=>{let B=g.edge(z);B.points.forEach(Q=>{Q.x-=k,Q.y-=q}),Object.hasOwn(B,"x")&&(B.x-=k),Object.hasOwn(B,"y")&&(B.y-=q)}),M.width=C-k+G,M.height=P-q+Y}function D(g){g.edges().forEach(k=>{let C=g.edge(k),q=g.node(k.v),P=g.node(k.w),M,G;C.points?(M=C.points[0],G=C.points[C.points.length-1]):(C.points=[],M=P,G=q),C.points.unshift(n.intersectRect(q,M)),C.points.push(n.intersectRect(P,G))})}function F(g){g.edges().forEach(k=>{let C=g.edge(k);if(Object.hasOwn(C,"x"))switch((C.labelpos==="l"||C.labelpos==="r")&&(C.width-=C.labeloffset),C.labelpos){case"l":C.x-=C.width/2+C.labeloffset;break;case"r":C.x+=C.width/2+C.labeloffset;break}})}function U(g){g.edges().forEach(k=>{let C=g.edge(k);C.reversed&&C.points.reverse()})}function H(g){g.nodes().forEach(k=>{if(g.children(k).length){let C=g.node(k),q=g.node(C.borderTop),P=g.node(C.borderBottom),M=g.node(C.borderLeft[C.borderLeft.length-1]),G=g.node(C.borderRight[C.borderRight.length-1]);C.width=Math.abs(G.x-M.x),C.height=Math.abs(P.y-q.y),C.x=M.x+C.width/2,C.y=q.y+C.height/2}}),g.nodes().forEach(k=>{g.node(k).dummy==="border"&&g.removeNode(k)})}function nt(g){g.edges().forEach(k=>{if(k.v===k.w){var C=g.node(k.v);C.selfEdges||(C.selfEdges=[]),C.selfEdges.push({e:k,label:g.edge(k)}),g.removeEdge(k)}})}function it(g){var k=n.buildLayerMatrix(g);k.forEach(C=>{var q=0;C.forEach((P,M)=>{var G=g.node(P);G.order=M+q,(G.selfEdges||[]).forEach(Y=>{n.addDummyNode(g,"selfedge",{width:Y.label.width,height:Y.label.height,rank:G.rank,order:M+ ++q,e:Y.e,label:Y.label},"_se")}),delete G.selfEdges})})}function at(g){g.nodes().forEach(k=>{var C=g.node(k);if(C.dummy==="selfedge"){var q=g.node(C.e.v),P=q.x+q.width/2,M=q.y,G=C.x-P,Y=q.height/2;g.setEdge(C.e,C.label),g.removeNode(k),C.label.points=[{x:P+2*G/3,y:M-Y},{x:P+5*G/6,y:M-Y},{x:P+G,y:M},{x:P+5*G/6,y:M+Y},{x:P+2*G/3,y:M+Y}],C.label.x=C.x,C.label.y=C.y}})}function Z(g,k){return n.mapValues(n.pick(g,k),Number)}function ee(g){var k={};return g&&Object.entries(g).forEach(([C,q])=>{typeof C=="string"&&(C=C.toLowerCase()),k[C]=q}),k}return Ye}var ze,$r;function cn(){if($r)return ze;$r=1;let v=V(),p=$().Graph;ze={debugOrdering:h};function h(d){let s=v.buildLayerMatrix(d),i=new p({compound:!0,multigraph:!0}).setGraph({});return d.nodes().forEach(e=>{i.setNode(e,{label:e}),i.setParent(e,"layer"+d.node(e).rank)}),d.edges().forEach(e=>i.setEdge(e.v,e.w,{},e.name)),s.forEach((e,o)=>{let t="layer"+o;i.setNode(t,{rank:"same"}),e.reduce((a,r)=>(i.setEdge(a,r,{style:"invis"}),r))}),i}return ze}var $e,Ur;function fn(){return Ur||(Ur=1,$e="1.1.4"),$e}var Ue,Hr;function pn(){return Hr||(Hr=1,Ue={graphlib:$(),layout:hn(),debug:cn(),util:{time:V().time,notime:V().notime},version:fn()}),Ue}var mn=pn();const Qr=dt(mn);function bn(v){var o;const p=v.map(t=>{var a,r;return{id:t.name,data:{label:t.name},position:{x:0,y:0},style:((a=t.metadata)==null?void 0:a.type)==="suite"?{border:"2px solid var(--color-primary)",padding:10}:((r=t.metadata)==null?void 0:r.type)==="setup"?{border:"2px solid var(--color-secondary)",padding:10}:{border:"2px solid var(--color-accent)",padding:10}}}),h=[];for(const t of v)for(const a of t.dependencies??[])v.some(r=>r.name===a)&&h.push({id:`e-${a}-${t.name}`,source:a,target:t.name,animated:((o=t.metadata)==null?void 0:o.type)==="setup"});const d=new Set(h.map(t=>t.target)),s=p.filter(t=>!d.has(t.id)),i=new Set(h.map(t=>t.source)),e=p.filter(t=>!i.has(t.id));return p.push({id:"start",data:{label:"Start"},position:{x:0,y:0},style:{border:"2px dashed #2563eb",padding:10,background:"#eff6ff"}}),s.forEach(t=>h.push({id:`e-start-${t.id}`,source:"start",target:t.id,animated:!1,style:{stroke:"#2563eb",strokeDasharray:"4 2"}})),p.push({id:"finish",data:{label:"Finish"},position:{x:0,y:0},style:{border:"2px dashed #dc2626",padding:10,background:"#fee2e2"}}),e.forEach(t=>h.push({id:`e-${t.id}-finish`,source:t.id,target:"finish",animated:!1,style:{stroke:"#dc2626",strokeDasharray:"4 2"}})),{nodes:p,edges:h}}const gn=(v,p,h="TB")=>{const d=new Qr.graphlib.Graph().setDefaultEdgeLabel(()=>({})),s=172,i=36,e=h==="LR";return d.setGraph({rankdir:h}),v.forEach(t=>{d.setNode(t.id,{width:s,height:i})}),p.forEach(t=>{d.setEdge(t.source,t.target)}),Qr.layout(d),{nodes:v.map(t=>{const a=d.node(t.id);return{...t,targetPosition:e?X.Left:X.Top,sourcePosition:e?X.Right:X.Bottom,position:{x:a.x-s/2,y:a.y-i/2}}}),edges:p}},qn=()=>[{rel:"stylesheet",href:Ot}];function Sn(){const v=lt(),{suite:{availableDependencies:p,dependencyGraph:h,dependencyTree:d}}=ut(),{suite:s,project:i}=ht(),[e,o]=W.useState("reuse"),[t,a]=W.useState(h),r=E=>{const L=E.currentTarget.name;o(L)},n=Ke(),[u,c]=W.useState([]),w=Ke({key:"list-tests"}),R=E=>{w.load(`/api/tests/${i.name}/list?q=${E}`)};W.useEffect(()=>{if(w.data){if(er(w.data))return;const E=w.data.tests;c(E)}},[w.data]);const[m,N]=W.useState(new Set),b=E=>{const L=E.currentTarget.dataset.dependency;N(l=>{const f=new Set(l);return E.currentTarget.checked?f.add(L):f.delete(L),f})};function _(E,L){const l=[];for(const f of E)L.has(f.name)?l.push(f):l.push(..._(f.dependencies,L));return l}function j(E){const L=[];function l(f){L.push({name:f.name,metadata:f.metadata,dependencies:f.dependencies.map(y=>y.name)}),f.dependencies.forEach(l)}return E.forEach(l),L}W.useEffect(()=>{const E=_(d,m),L=j(E),l=Array.from(new Map(L.map(O=>[O.name,O])).values()),{nodes:f,edges:y}=bn(l),x=gn(f,y);a(x)},[m]);const I=(E,L)=>E.map((l,f)=>S.jsxs("div",{className:"w-full",children:[S.jsxs("div",{className:"flex flex-row gap-4 items-center p-4",children:[S.jsx(vt,{className:L&&m.has(L)?"cursor-not-allowed":"","data-dependency":l.name,"data-parent":L,onChange:b,id:`${l.name}-toggle`,checked:m.has(l.name)||L&&m.has(L)||!1}),S.jsx("label",{htmlFor:`${l.name}-toggle`,className:J(L&&m.has(L)?"cursor-not-allowed":"","font-bold text-sm"),children:l.name}),S.jsx(mt,{color:l.metadata.type==="suite"?"primary":"secondary",size:"sm",children:l.metadata.type})]}),S.jsx("div",{className:"ml-4 bg-base-300 shadow-inner flex flex-row items-center",children:I(l.dependencies,l.name)})]},`${l.name}-${f}`));return S.jsx(ct,{method:"POST",children:S.jsxs("div",{className:"grid gap-4",children:[S.jsxs("div",{className:"flex flex-row items-center justify-between",children:[S.jsx(gt,{size:"h1",children:"Create dependency"}),S.jsxs("div",{className:"flex flex-row gap-2",children:[S.jsx(ft,{to:"../configuration",children:S.jsx(Ze,{type:"button",children:"Go back"})}),S.jsxs(Ze,{color:"primary",type:"submit",loading:n.state!=="idle",children:[S.jsx(yt,{}),"Save"]})]})]}),S.jsxs(bt,{children:[S.jsx("input",{type:"hidden",name:"dependencies",value:Array.from(m.values()).join(",")}),S.jsx("input",{type:"hidden",name:"suite",value:s}),S.jsx("input",{type:"hidden",name:"session",value:e}),S.jsxs("div",{className:"grid gap-4",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-sm mb-2",children:"A dependency is a test which you can re-use between suites. Each dependency can have its own subset of dependencies."}),er(v)&&S.jsx(pt,{message:v.error.message,color:"error"})]}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-bold mb-1",children:"Name"}),S.jsx(Xr,{className:"w-full",placeholder:"E.g. admin-login",required:!0,name:"name"})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[S.jsx("p",{className:"text-sm font-bold mb-1",children:"Session Behaviour"}),S.jsx(wt,{message:`Reusing your session data (cookies & local storage) will make
                        recording and replaying tests much faster—no need to log in every time.
                        If you need a truly clean slate, choose “Start fresh.” If your not sure, ask your developer!`,children:S.jsx(_t,{className:"opacity-30"})})]}),S.jsx("fieldset",{children:S.jsxs("div",{className:"flex flex-col gap-2",children:[S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[S.jsx(rr,{onChange:r,checked:e==="reuse",name:"reuse",defaultChecked:!0}),S.jsx("p",{className:"text-sm",children:"Reuse session data"})]}),S.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[S.jsx(rr,{onChange:r,checked:e==="fresh",name:"fresh"}),S.jsx("p",{className:"text-sm",children:"Start fresh"})]})]})})]}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-bold mb-1",children:"Select a test"}),S.jsx(Ct,{debounce:300,name:"test",options:u.map(E=>({label:`${E.suite} - ${E.name}`,value:E.path})),onSearchChange:R})]}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-bold mb-1",children:"(Optional) Configure dependencies"}),S.jsxs("div",{className:"grid grid-cols-12 gap-4 min-h-64",children:[S.jsx("div",{className:"col-span-8 h-full",children:S.jsxs("div",{className:"w-full h-full shadow-lg rounded-lg p-4",children:[S.jsx("div",{className:"p-2",children:S.jsxs("p",{className:"text-xs text-neutral opacity-60",children:[p.length||0," available"," ",p.length>0?"dependencies":"dependency"," ","found"]})}),I(d)]})}),S.jsx("div",{className:"col-span-4 bg-base-200 rounded-lg",children:S.jsxs(xt,{fitView:!0,nodes:t.nodes,edges:t.edges,children:[S.jsx(kt,{color:"#ccc",size:2,variant:Nt.Dots}),S.jsx(jt,{})]})})]})]})]})]})]})})}export{Sn as default,qn as links};
