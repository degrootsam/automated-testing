import{r as s}from"./components-DAwjMhVV.js";import{p as g}from"./index-BhvR20cr.js";function j(r,c,n=1e3,u){const[m,p]=s.useState(),[T,E]=s.useState(),a=s.useRef(r);return a.current=r,s.useEffect(()=>{let f,e=!1;const i=async()=>{if(!(!a.current||e)){try{const t=await fetch(c,u);if(!t.ok)throw new Error(`HTTP ${t.status} ${t.statusText}`);const o=await t.json();e||p(o)}catch(t){const o=g(t);e||E(o)}!e&&a.current&&(f=setTimeout(i,n))}};return r&&i(),()=>{e=!0,clearTimeout(f)}},[r,c,n]),{data:m,error:T}}export{j as u};
